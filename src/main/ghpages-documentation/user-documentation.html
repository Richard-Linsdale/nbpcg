<p>The Netbeans Platform Application Code generator is a Netbeans plug-in which creates a set of artifacts to speed up creation of a NetBeans Platform Application. These artifacts can include:</p>
<ul>
  <li>Database creation scripts</li>
  <li>Other utility scripts</li>
  <li>Entity classes and their associated Entity Managers</li>
  <li>Node class for all entities</li>
  <li>Explorer Views for all entities</li>
  <li>Editors for all entities</li>
</ul><p>The generation of these artifacts is controlled by a single NBPCG script which describes the necessary build details, entities details and also the node relationships.</p><p>Best practise would be to create a separate Netbeans module into which the NBPCG script is placed and all the artifacts are generated. However it is possible to incorporate the NBPCG script in an existing module and generate the artifacts within the module. The only restriction in this case is that the generated code must be created within packages in which no other classes have been manually created, as all files in NBPCG referenced packages are deleted prior to code generation. It is also possible for a script to generate it's code across multiple modules (using the build directive), but in this case all the referenced projects must be opened in the Netbeans IDE in order that the script will work.</p><h5>The NBPCG script</h5><p>The NBPCG script is an XML document. A template is available - using the New... entry, the template can be selected from the other category with file type NBPCG Definition file</p><p><img src="images/newfile.png" alt="script template selection" /></p><p>The xml consists of a top level element ( <strong>nbpcg</strong> ). Details of the xml document is outlined in the following section:</p><p><strong>The nbpcg element</strong></p><p>The top level element of the nbpcg script document.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">name </td>
      <td align="left">the name of the script </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">build </td>
      <td align="left"> </td>
      <td align="left">one </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">node </td>
      <td align="left"> </td>
      <td align="left">one or more</td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">databases </td>
      <td align="left"> </td>
      <td align="left">one or more</td>
    </tr>
  </tbody>
</table><p><strong>The build element</strong></p><p>Defines the build information - artifact selection, projects and packages etc.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">viewerrole </td>
      <td align="left">the viewerroles for this application (comma separated) </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">project </td>
      <td align="left"> </td>
      <td align="left">one or more</td>
    </tr>
  </tbody>
</table><p><strong>The project element</strong></p><p>Defines the project information.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">name </td>
      <td align="left">the project name </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">log </td>
      <td align="left">the log key to be used in generated files </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">license </td>
      <td align="left">the license header to be added to generated files - one of gpl30 or lgpl21 - default is gpl30 </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">generatescripts </td>
      <td align="left"> </td>
      <td align="left">zero or one</td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">generate </td>
      <td align="left"> </td>
      <td align="left">zero or more</td>
    </tr>
  </tbody>
</table><p><strong>The generatescripts element</strong></p><p>Requests the generation of script files (Database creation scripts and other utility scripts).</p><p>No attributes or child elements.</p><p><strong>The generate element</strong></p><p>Requests the generation of code files for various types of entities.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">type </td>
      <td align="left">the type of code artifacts to be generated - one of data, node, nodeviewer or nodeeditor </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">package </td>
      <td align="left">the package name to be used for all artifacts generated by this request </td>
      <td align="left">yes </td>
    </tr>
  </tbody>
</table><p><strong>The node element</strong></p><p>Defines the nodes required and their interrelationships.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">name </td>
      <td align="left">the node name </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">view </td>
      <td align="left">the types of view required - one of both, icon, tree, none - default is tree </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">viewers </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">dbname </td>
      <td align="left">the database name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">rootlabel </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">rooticon </td>
      <td align="left">the root node icon name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">icon </td>
      <td align="left">the node icon name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">label </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">orderable </td>
      <td align="left">set to yes if nodes are allowed to be orderable (by drag and drop) - default is no </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">nullallowed </td>
      <td align="left">set to yes if null value is allowed </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">fkey </td>
      <td align="left">set to no if foreign key is not utilised - default is yes </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">displaynameformat </td>
      <td align="left">format for the node's display name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">displaytitleformat </td>
      <td align="left">format for the node's display title </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">sortformat </td>
      <td align="left">format for the node's sort string - also implies sortable </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">min </td>
      <td align="left">minimum number of this node type (as a childnode) </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">max </td>
      <td align="left">maximum number of this node type (as a childnode) </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">node </td>
      <td align="left">child nodes of this node </td>
      <td align="left">zero or more</td>
    </tr>
  </tbody>
</table><p><strong>The databases element</strong></p><p>Collection of all database definitions.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">database </td>
      <td align="left"> </td>
      <td align="left">one or more</td>
    </tr>
  </tbody>
</table><p><strong>The database element</strong></p><p>Definition of a database object.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">name </td>
      <td align="left">the logical name of this database </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">dbname </td>
      <td align="left">the database name of this database - default is attribute name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">db </td>
      <td align="left">The database type - one of MySQL - default MySQL </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">access </td>
      <td align="left">read/write access for this database - one of rw or ro - default is rw </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">type </td>
      <td align="left">database key type - one of idkeyauto - default is idkeyauto </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">withfields </td>
      <td align="left">additional standard fields to add - one of idandstamp - default is idandstamp </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">usepackage </td>
      <td align="left">?? </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">table </td>
      <td align="left"> </td>
      <td align="left">one or more</td>
    </tr>
  </tbody>
</table><p><strong>The table element</strong></p><p>Definition of a database table object.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">name </td>
      <td align="left">entity name </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">dbname </td>
      <td align="left">the database name of this table - default is attribute name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">access </td>
      <td align="left">read/write access for this table - one of rw or ro - default is ?? </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">type </td>
      <td align="left">table key type - one of idkeyauto - default is ?? </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">withfields </td>
      <td align="left">additional standard fields to add - one of idandstamp - default is ?? </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">field </td>
      <td align="left"> </td>
      <td align="left">zero or more</td>
    </tr>
    <tr>
      <td align="left">Child Element </td>
      <td align="left">insert </td>
      <td align="left"> </td>
      <td align="left">zero or more</td>
    </tr>
  </tbody>
</table><p><strong>The field element</strong></p><p>Definition of a database table field (column) object.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">name </td>
      <td align="left">field name </td>
      <td align="left">yes </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">dbname </td>
      <td align="left">teh table column name - defaults to attribute name </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">index </td>
      <td align="left">define the indexing for this field - one of unique or yes - default is no </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">unique </td>
      <td align="left">define the uniqueness of this field - one of yes - default is no </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">type </td>
      <td align="left">data type of the field one of boolean, long, int, date, datetime, enum or reference - default is string </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">nullallowed </td>
      <td align="left">are null values allowed? - one of yes - default is no </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">label </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">references </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">fkey </td>
      <td align="left">set to no if foreign key is not utilised - default is yes </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">values </td>
      <td align="left">set of enum values (comma separated) </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">min </td>
      <td align="left">min length of string entered, min value of number entered </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">max </td>
      <td align="left">max length of string entered, max value of number entered </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">future </td>
      <td align="left">set to yes if date or datetime entered must be in future </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">past </td>
      <td align="left">set to yes if date or datetime entered must be in past </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">encodemethod </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">entryfield </td>
      <td align="left"> </td>
      <td align="left">optional </td>
    </tr>
  </tbody>
</table><p><strong>The insert element</strong></p><p>Definition of an data row to be inserted into the database table object.</p>
<table>
  <thead>
    <tr>
      <th align="left">Type </th>
      <th align="left">Name </th>
      <th align="left">Value </th>
      <th align="left">Required </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">Attribute </td>
      <td align="left">values </td>
      <td align="left">the data values to insert (comma separated) </td>
      <td align="left">yes </td>
    </tr>
  </tbody>
</table><h5>Setting up a Maven project</h5>
<ul>
  <li>In Projects View, Add a folder named <code>nbpcg</code> under <code>Other Sources</code>.</li>
  <li>Place the nbpcg script file ( <code>script.xml</code>) in the <code>nbpcg</code> node</li>
</ul><p><img src="images/nbpcgfolderandscript.jpg" alt="nbpcg folder and script" /></p><h5>Setting up an ANT project</h5>
<ul>
  <li>In Files view, Add a folder name <code>nbpcg-files</code> under the project root.</li>
  <li>In Project view, Place the nbpcg script file ( <code>script.xml</code>) in the <code>NBPCG File</code> node.</li>
</ul><h5>Executing the NBPCG script</h5><p>The NBPCG script can be executed by actions on the popup menu on:</p>
<ol>
  <li>The Project node</li>
</ol><p><img src="images/projectaction.jpg" alt="project node action" /></p>
<ol>
  <li>The NBPCG script file</li>
</ol><p><img src="images/scriptaction.jpg" alt="script action" /></p><p>Executing the script will open a new tab in the output window. Progress and errors will be reported in that tab.</p><p><img src="images/outputtab.jpg" alt="output tab" /></p><h5>Dependency Information for NBPCG generated Modules</h5><p>NBPCG does not currently setup dependencies for the generated modules (either on NBPCG support libraries or Netbean Platform modules). The following documentation details the dependencies that exist and should be added to the various generated modules.</p>
<table>
  <thead>
    <tr>
      <th align="left"> </th>
      <th align="center">Datamodel </th>
      <th align="center">NodeModel </th>
      <th align="center">NodeViewer </th>
      <th align="center">NodeEditor </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left" colspan="5"><strong>NetBeans Platform</strong></td>
    </tr>
    <tr>
      <td align="left">Explorer &amp; Property Sheet API</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center"> </td>
    </tr>
    <tr>
      <td align="left">Lookup API</td>
      <td align="center">x</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">Nodes API</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">UI Utilities API</td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">Utilities API</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">Window System API</td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left" colspan="5"><strong>NBPCG-Library</strong></td>
    </tr>
    <tr>
      <td align="left">MySQL</td>
      <td align="center">* </td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center"> </td>
    </tr>
    <tr>
      <td align="left">NBPCG Data Support Lib</td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">NBPCG Form Support Lib</td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">NBPCG Node Support Lib</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">NBPCG Support Lib</td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">NBPCG TopComponent Support Lib</td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left" colspan="5"><strong>GENERATED MODULES</strong></td>
    </tr>
    <tr>
      <td align="left">XX DataModel</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">XX NodeModel</td>
      <td align="center"> </td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
    <tr>
      <td align="left">XX NodeEditor</td>
      <td align="center"> </td>
      <td align="center">x</td>
      <td align="center"> </td>
      <td align="center"> </td>
    </tr>
    <tr>
      <td align="left" colspan="5"><em>If you are using table aliases to access other tables then you will need to add addition dependencies to those modules</em></td>
    </tr>
    <tr>
      <td align="left" colspan="5"><strong>ALIAS MODULES</strong></td>
    </tr>
    <tr>
      <td align="left">XX DataModel</td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
      <td align="center">x</td>
    </tr>
  </tbody>
</table>